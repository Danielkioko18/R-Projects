"0","#use the trained model to predict species on the unseen test data"
"0","bat_results <- bat_test %>%"
"0","  ##add the predicted species class (.pred_class)"
"0","  bind_cols(predict(rf_fit_base, new_data = bat_test, type = ""class"")) %>%"
"0","  # Add the predicted class probabilities"
"0","  bind_cols(predict(rf_fit_base, new_data = bat_test, type = ""prob""))"
"0",""
"0","###=====================Evaluation Metrics========================"
"0",""
"0","# 1. Confusion Matrix:Shows correct vs. incorrect classifications per specie"
"0",""
"0","conf_matrix <- conf_mat(bat_results, truth = Species, estimate = .pred_class)"
"0","cat(""Confusion Matrix:\n"")"
"1","Confusion Matrix:
"
"0","print(conf_matrix)"
"1","          Truth
"
"1","Prediction"
"1"," EPFU"
"1"," LACI"
"1"," MYLU"
"1"," MYVO"
"1","
      EPFU"
"1","    9"
"1","    0"
"1","    0"
"1","    0"
"1","
      LACI"
"1","    0"
"1","    9"
"1","    0"
"1","    0"
"1","
      MYLU"
"1","    0"
"1","    0"
"1","    8"
"1","    0"
"1","
      MYVO"
"1","    0"
"1","    0"
"1","    1"
"1","    9"
"1","
"
"0","##2. Key Metrics: Calculate Accuracy and Kappa"
"0","model_metrics <- metric_set(accuracy, kap)"
"0","metrics_table <- bat_results %>%"
"0","  model_metrics(truth = Species, estimate = .pred_class) %>%"
"0","  select(-.estimator) %>%"
"0","  "
"0","  ###se gt to format the metrics nicely"
"0","  gt() %>%"
"0","  tab_header(title = ""Random Forest Model Performance Metrics"") %>%"
"0","  fmt_number(columns = where(is.numeric), decimals = 3)"
"0",""
"0","#ddisplay the performance metrics table"
"0","metrics_table"
